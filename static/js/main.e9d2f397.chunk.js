(this["webpackJsonpchess-game"]=this["webpackJsonpchess-game"]||[]).push([[0],{15:function(e,t,o){e.exports=o(24)},20:function(e,t,o){},23:function(e,t,o){},24:function(e,t,o){"use strict";o.r(t);var n=o(1),i=o.n(n),a=o(13),r=o.n(a),s=(o(20),o(11));var l,c=o(8);function u(e){var t=e.color,o=e.icon,i=e.size,a=void 0===i?"medium":i,r=e.onClick;return n.createElement("div",{className:Object(c.a)("white"===t?m.whiteSquareContainer:m.blackSquareContainer,m.rootContainer),onClick:r},o&&n.createElement("span",{dangerouslySetInnerHTML:{__html:o},className:Object(c.a)("medium"===a?m.mediumIcon:m.largeIcon,m.baseIcon)}))}!function(e){e.WHITE_KING="&#9812;",e.WHITE_QUEEN="&#9813;",e.WHITE_TOWER="&#9814;",e.WHITE_BISHOP="&#9815;",e.WHITE_KNIGHT="&#9816;",e.WHITE_PAWN="&#9817;",e.BLACK_KING="&#9818;",e.BLACK_QUEEN="&#9819;",e.BLACK_TOWER="&#9820;",e.BLACK_BISHOP="&#9821;",e.BLACK_KNIGHT="&#9822;",e.BLACK_PAWN="&#9823;",e.BULLET="&#8226;"}(l||(l={}));var h,m={rootContainer:{display:"flex",justifyContent:"center",alignItems:"center"},whiteSquareContainer:{backgroundColor:"white",border:"1px solid white",width:50,height:50},blackSquareContainer:{backgroundColor:"gray",border:"1px solid white",width:50,height:50},mediumIcon:{fontSize:"32px"},largeIcon:{fontSize:"48px"},baseIcon:{cursor:"pointer"}},v=o(4),b=o(14),p=o(2),w=o(3);!function(e){e.WHITE="WHITE",e.BLACK="BLACK"}(h||(h={}));var d,T,g=function(){function e(t,o,n){Object(p.a)(this,e),this.team=void 0,this.board=void 0,this.initialPosition=void 0,this.team=t,this.board=o,this.initialPosition=n}return Object(w.a)(e,[{key:"getTeam",value:function(){return this.team}},{key:"getBoard",value:function(){return this.board}},{key:"getInitialPosition",value:function(){return this.initialPosition}}]),e}(),f=o(0),y=o(5),E=o(6),O=function(){function e(t,o){Object(p.a)(this,e),this.startPosition=void 0,this.endPosition=void 0,this.startPosition=t,this.endPosition=o}return Object(w.a)(e,[{key:"getStartPosition",value:function(){return this.startPosition}},{key:"getEndPosition",value:function(){return this.endPosition}}]),e}(),j=function(e){Object(E.a)(o,e);var t=Object(y.a)(o);function o(){return Object(p.a)(this,o),t.apply(this,arguments)}return Object(w.a)(o,[{key:"getMovesWithStep",value:function(e,t,o){for(var n=[],i=this.getBoard(),a=Object(v.a)({},e,{row:e.row+t,column:e.column+o});i.isPositionWithinTheTable(a);){var r=new O(e,a);if(i.hasTeamFriend(this.getTeam(),a))break;if(i.hasTeamEnemy(this.getTeam(),a)){n.push(r);break}n.push(r),a={row:a.row+t,column:a.column+o}}return n}}]),o}(g),M=function(e){Object(E.a)(o,e);var t=Object(y.a)(o);function o(){return Object(p.a)(this,o),t.apply(this,arguments)}return Object(w.a)(o,[{key:"getName",value:function(){return T.TOWER}},{key:"getAvailableMoves",value:function(e){var t=[];return t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,1,0))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,-1,0))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,0,1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,0,-1))),t}}]),o}(j),k=function(e){Object(E.a)(o,e);var t=Object(y.a)(o);function o(){return Object(p.a)(this,o),t.apply(this,arguments)}return Object(w.a)(o,[{key:"getName",value:function(){return T.KNIGHT}},{key:"getAvailableMoves",value:function(e){var t=[];return t.push.apply(t,Object(f.a)(this.getValidMove(e,Object(v.a)({},e,{row:e.row+2,column:e.column+1})))),t.push.apply(t,Object(f.a)(this.getValidMove(e,Object(v.a)({},e,{row:e.row+2,column:e.column-1})))),t.push.apply(t,Object(f.a)(this.getValidMove(e,Object(v.a)({},e,{row:e.row-2,column:e.column+1})))),t.push.apply(t,Object(f.a)(this.getValidMove(e,Object(v.a)({},e,{row:e.row-2,column:e.column-1})))),t.push.apply(t,Object(f.a)(this.getValidMove(e,Object(v.a)({},e,{row:e.row+1,column:e.column+2})))),t.push.apply(t,Object(f.a)(this.getValidMove(e,Object(v.a)({},e,{row:e.row+1,column:e.column-2})))),t.push.apply(t,Object(f.a)(this.getValidMove(e,Object(v.a)({},e,{row:e.row-1,column:e.column+2})))),t.push.apply(t,Object(f.a)(this.getValidMove(e,Object(v.a)({},e,{row:e.row-1,column:e.column-2})))),t}},{key:"getValidMove",value:function(e,t){var o=[],n=this.getBoard();if(!n.isPositionWithinTheTable(t))return o;if(n.hasTeamFriend(this.getTeam(),t))return o;var i=new O(e,t);return o.push(i),o}},{key:"getSpecialMoves",value:function(){throw new Error("Method not implemented.")}}]),o}(g),P=function(e){Object(E.a)(o,e);var t=Object(y.a)(o);function o(){return Object(p.a)(this,o),t.apply(this,arguments)}return Object(w.a)(o,[{key:"getName",value:function(){return T.BISHOP}},{key:"getAvailableMoves",value:function(e){var t=[];return t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,1,1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,1,-1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,-1,1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,-1,-1))),t}},{key:"getSpecialMoves",value:function(){throw new Error("Method not implemented.")}}]),o}(j),W=function(e){Object(E.a)(o,e);var t=Object(y.a)(o);function o(){return Object(p.a)(this,o),t.apply(this,arguments)}return Object(w.a)(o,[{key:"getName",value:function(){return T.KING}},{key:"getAvailableMoves",value:function(e){var t=[];return t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,1,1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,1,-1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,-1,1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,-1,-1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,1,0))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,-1,0))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,0,1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,0,-1))),t}},{key:"getMovesWithStep",value:function(e,t,o){var n=[],i=this.getBoard(),a=Object(v.a)({},e,{row:e.row+t,column:e.column+o});if(i.isPositionWithinTheTable(a)&&(i.hasTeamEnemy(this.getTeam(),a)||i.isPositionEmpty(a))){var r=new O(e,a);n.push(r)}return n}},{key:"getSpecialMoves",value:function(){throw new Error("Method not implemented.")}}]),o}(g),I=function(e){Object(E.a)(o,e);var t=Object(y.a)(o);function o(){return Object(p.a)(this,o),t.apply(this,arguments)}return Object(w.a)(o,[{key:"getName",value:function(){return T.QUEEN}},{key:"getAvailableMoves",value:function(e){var t=[];return t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,1,1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,1,-1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,-1,1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,-1,-1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,1,0))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,-1,0))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,0,1))),t.push.apply(t,Object(f.a)(this.getMovesWithStep(e,0,-1))),t}}]),o}(j),B=o(10),S=function(e){Object(E.a)(o,e);var t=Object(y.a)(o);function o(){return Object(p.a)(this,o),t.apply(this,arguments)}return Object(w.a)(o,[{key:"getName",value:function(){return T.PAWN}},{key:"getAvailableMoves",value:function(e){var t=[],o=this.getBoard(),n=this.getTeam()===h.WHITE?1:-1;if(o.isPositionEmpty(Object(v.a)({},e,{row:e.row+n}))){var i=new O(e,{row:e.row+n,column:e.column});if(t.push(i),Object(B.isEqual)(this.getInitialPosition(),e)&&o.isPositionEmpty(Object(v.a)({},e,{row:e.row+2*n}))){var a=new O(e,{row:e.row+2*n,column:e.column});t.push(a)}}if(o.hasTeamEnemy(this.getTeam(),{row:e.row+n,column:e.column+1})){var r=new O(e,{row:e.row+n,column:e.column+1});t.push(r)}if(o.hasTeamEnemy(this.getTeam(),{row:e.row+n,column:e.column-1})){var s=new O(e,{row:e.row+n,column:e.column-1});t.push(s)}return t}}]),o}(g);function A(e){if(null==e)throw Error("Object is null");return e}!function(e){e.DEFAULT="DEFAULT",e.CUSTOM="CUSTOM"}(d||(d={})),function(e){e.EMPTY="EMPTY",e.PAWN="PAWN",e.BISHOP="BISHOP",e.KNIGHT="KNIGHT",e.KING="KING",e.QUEEN="QUEEN",e.TOWER="TOWER"}(T||(T={}));var C=function(){function e(t){Object(p.a)(this,e),this.mode=void 0,this.boardTable=void 0,this.whiteTeam=void 0,this.blackTeam=void 0,this.recordedMoves=void 0,this.availableMoves=void 0,this.activePiece=void 0,this.mode=t,this.boardTable=[],this.whiteTeam=new Map,this.blackTeam=new Map,this.recordedMoves=[],this.availableMoves=[],this.createGame()}return Object(w.a)(e,[{key:"isPositionWithinTheTable",value:function(e){var t=this.boardTable.length,o=this.boardTable.length>0?this.boardTable[0].length:0,n=e.row<t&&e.row>=0,i=e.column<o&&e.column>=0;return n&&i}},{key:"isPositionEmpty",value:function(e){return!!this.isPositionWithinTheTable(e)&&null==this.getBoardElement(e)}},{key:"getElementName",value:function(e){if(!this.isPositionWithinTheTable(e))return null;if(this.isPositionEmpty(e))return{name:T.EMPTY};var t=A(this.getBoardElement(e));return{team:t.getTeam(),name:t.getName()}}},{key:"getBoardElement",value:function(e){return this.isPositionWithinTheTable(e)?this.boardTable[e.row][e.column]:null}},{key:"hasTeamEnemy",value:function(e,t){var o=this.getBoardElement(t);return null!=o&&o.getTeam()!==e}},{key:"hasTeamFriend",value:function(e,t){var o=this.getBoardElement(t);return null!=o&&o.getTeam()===e}},{key:"createGame",value:function(){if(this.mode===d.DEFAULT)this.createDefaultGame();else if(this.mode!==d.CUSTOM)throw new Error("Game mode not implemented")}},{key:"initBoardTable",value:function(e){for(var t=0;t<e.rows;t++){this.boardTable[t]=[];for(var o=0;o<e.columns;o++)this.boardTable[t].push(null)}}},{key:"addPiecesToCustomBoard",value:function(e){this.mode===d.CUSTOM&&this.addPiecesToBoard(e)}},{key:"addPiecesToBoard",value:function(e){var t,o=Object(b.a)(e);try{for(o.s();!(t=o.n()).done;){var n=t.value,i=n.getInitialPosition();this.boardTable[i.row][i.column]=n}}catch(a){o.e(a)}finally{o.f()}this.assignTeams()}},{key:"isAvailableMove",value:function(e){return this.availableMoves.findIndex((function(t){return Object(B.isEqual)(t.getEndPosition(),e)}))>=0}},{key:"executeBoardAction",value:function(e){if(this.isAvailableMove(e)){var t=A(this.activePiece),o=this.getPieceTeam(t);return this.makeMove(t,new O(A(o.get(t)),e)),void(this.availableMoves=[])}!this.isPositionEmpty(e)&&this.isPositionWithinTheTable?this.setAvailableMoves(e):this.availableMoves=[]}},{key:"setAvailableMoves",value:function(e){if(!this.isPositionWithinTheTable(e)||this.isPositionEmpty(e))return null;var t=A(this.getBoardElement(e));this.activePiece=t,this.availableMoves=this.filterMovesThatExposeTheKing(this.activePiece,t.getAvailableMoves(e))}},{key:"filterMovesThatExposeTheKing",value:function(e,t){var o=this,n=A(Array.from(this.getPieceTeam(e).keys()).find((function(e){return e.getName()===T.KING})));return t.filter((function(t){o.makeMove(e,t);var i=o.getPieceTeam(n).get(n),a=o.isPositionInThreat(n.getTeam(),i);return o.revertLastMove(),!a}))}},{key:"isPositionInThreat",value:function(e,t){var o=this.getTeam(e,!0);return null!=Array.from(o.keys()).find((function(e){var n=o.get(e);return null!=e.getAvailableMoves(n).find((function(e){return Object(B.isEqual)(e.getEndPosition(),t)}))}))}},{key:"getPieceTeam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getTeam(e.getTeam(),t)}},{key:"getTeam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e===h.WHITE?this.blackTeam:this.whiteTeam:e===h.WHITE?this.whiteTeam:this.blackTeam}},{key:"makeMove",value:function(e,t){if(this.isRockMove(e,t))return this.makeRockMove(e,t);var o=t.getStartPosition(),n=t.getEndPosition(),i=this.getBoardElement(n);this.boardTable[n.row][n.column]=e,this.boardTable[o.row][o.column]=null;var a=this.getPieceTeam(e),r=this.getPieceTeam(e,!0);a.set(e,n),null!=i&&r.delete(i),this.recordedMoves.push({piece:e,move:t,endPositionOldElement:i})}},{key:"isRockMove",value:function(e,t){return e.getName()===T.KING&&Math.abs(t.getEndPosition().column-t.getStartPosition().column)>1}},{key:"makeRockMove",value:function(e,t){var o=this.getPieceTeam(e),n=t.getStartPosition(),i=t.getEndPosition(),a={row:n.row,column:i.column-n.column>0?i.column+1:i.column-2},r=Object(v.a)({},a,{column:i.column-n.column>0?a.column-2:a.column+3}),s=A(this.getBoardElement(a));this.boardTable[i.row][i.column]=e,this.boardTable[n.row][n.column]=null,this.boardTable[r.row][r.column]=s,this.boardTable[a.row][a.column]=null,o.set(s,r),o.set(e,i),this.recordedMoves.push({piece:e,move:t,endPositionOldElement:s})}},{key:"revertLastMove",value:function(){if(0!==this.recordedMoves.length){var e=A(this.recordedMoves.pop());if(this.isRockMove(e.piece,e.move))return this.revertRockMove(e);var t=e.move.getStartPosition(),o=e.move.getEndPosition(),n=e.piece,i=e.endPositionOldElement;if(this.boardTable[t.row][t.column]=n,this.boardTable[o.row][o.column]=i,this.getPieceTeam(n).set(n,t),null!=i)this.getPieceTeam(i).set(i,o)}}},{key:"revertRockMove",value:function(e){var t=e.piece,o=e.piece,n=e.move,i=n.getStartPosition(),a=n.getEndPosition(),r=this.getPieceTeam(t);this.boardTable[a.row][a.column]=null,this.boardTable[i.row][i.column]=t,r.set(t,i);var s={row:i.row,column:a.column-i.column>0?a.column+1:a.column-2},l=Object(v.a)({},s,{column:a.column-i.column>0?s.column-2:s.column+3});this.boardTable[l.row][l.column]=null,this.boardTable[s.row][s.column]=o,r.set(o,s)}},{key:"assignTeams",value:function(){for(var e=this.boardTable.length,t=this.boardTable.length>0?this.boardTable[0].length:0,o=0;o<e;o++)for(var n=0;n<t;n++){var i=this.getBoardElement({row:o,column:n});null!=i&&this.assignTeam(i,{row:o,column:n})}}},{key:"assignTeam",value:function(e,t){e.getTeam()===h.WHITE?this.whiteTeam.set(e,t):this.blackTeam.set(e,t)}},{key:"getTable",value:function(){return this.boardTable}},{key:"createDefaultGame",value:function(){this.initBoardTable({rows:8,columns:8}),this.addPiecesToBoard([new M(h.WHITE,this,{row:0,column:0}),new k(h.WHITE,this,{row:0,column:1}),new P(h.WHITE,this,{row:0,column:2}),new I(h.WHITE,this,{row:0,column:3}),new W(h.WHITE,this,{row:0,column:4}),new P(h.WHITE,this,{row:0,column:5}),new k(h.WHITE,this,{row:0,column:6}),new M(h.WHITE,this,{row:0,column:7}),new S(h.WHITE,this,{row:1,column:0}),new S(h.WHITE,this,{row:1,column:1}),new S(h.WHITE,this,{row:1,column:2}),new S(h.WHITE,this,{row:1,column:3}),new S(h.WHITE,this,{row:1,column:4}),new S(h.WHITE,this,{row:1,column:5}),new S(h.WHITE,this,{row:1,column:6}),new S(h.WHITE,this,{row:1,column:7}),new S(h.BLACK,this,{row:6,column:0}),new S(h.BLACK,this,{row:6,column:1}),new S(h.BLACK,this,{row:6,column:2}),new S(h.BLACK,this,{row:6,column:3}),new S(h.BLACK,this,{row:6,column:4}),new S(h.BLACK,this,{row:6,column:5}),new S(h.BLACK,this,{row:6,column:6}),new S(h.BLACK,this,{row:6,column:7}),new M(h.BLACK,this,{row:7,column:0}),new k(h.BLACK,this,{row:7,column:1}),new P(h.BLACK,this,{row:7,column:2}),new I(h.BLACK,this,{row:7,column:3}),new W(h.BLACK,this,{row:7,column:4}),new P(h.BLACK,this,{row:7,column:5}),new k(h.BLACK,this,{row:7,column:6}),new M(h.BLACK,this,{row:7,column:7})]),this.assignTeams()}}],[{key:"createCustomBoard",value:function(e){var t=new this(d.CUSTOM);return t.initBoardTable(e),t}}]),e}();function H(e){var t=e.dimensions,o=void 0===t?{rows:8,columns:8}:t,i=Object(n.useState)(!1),a=Object(s.a)(i,2),r=a[0],h=a[1],m=Object(n.useState)(new C(d.DEFAULT)),v=Object(s.a)(m,2),b=v[0],p=v[1];return Object(n.useEffect)((function(){r&&h(!1)}),[r]),function(){for(var e=[],t=function(t){for(var i=["black","white"],a=[],r=function(e){var o=i[(e+t)%2],r=b.getElementName({row:t,column:e}),s=void 0;s=null==r?null:b.isAvailableMove({row:t,column:e})?l.BULLET:r.name===T.EMPTY?null:function(e,t){for(var o in l)if(o==="".concat(t,"_").concat(e))return l[o];throw Error("Invalid name or team, received name=".concat(e," and team=").concat(t))}(r.name,A(r.team)),a.push(n.createElement(u,{key:"row".concat(t,"-column").concat(e),color:o,icon:s,onClick:function(){b.executeBoardAction({row:t,column:e}),h(!0)}}))},s=0;s<o.columns;s++)r(s);e.push(n.createElement("div",{key:"row".concat(t),className:Object(c.a)(N.rowRootContainer)},a))},i=o.rows-1;i>=0;i--)t(i);return n.createElement("div",null,n.createElement("div",{className:Object(c.a)(N.boardRootContainer)},e),n.createElement("button",{onClick:function(){p(new C(d.DEFAULT))}},"Reset Game"),n.createElement("button",{onClick:function(){b.revertLastMove(),h(!0)}},"Revert last move"))}()}var N={boardRootContainer:{border:"4px solid brown",display:"inline-block",margin:"4px"},rowRootContainer:{display:"flex"}};function K(e){return n.createElement(H,null)}o(23);var L=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"Chess Game"},i.a.createElement(K,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.e9d2f397.chunk.js.map